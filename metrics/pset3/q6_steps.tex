% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{article}
\usepackage{lmodern}
\usepackage{amsmath}
\usepackage{ifxetex,ifluatex}
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
  \usepackage{amssymb}
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\hypersetup{
  hidelinks,
  pdfcreator={LaTeX via pandoc}}
\urlstyle{same} % disable monospaced font for URLs
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering
\ifluatex
  \usepackage{selnolig}  % disable illegal ligatures
\fi

\author{}
\date{}

\begin{document}

\hypertarget{header-n36}{%
\section{How the F Do I Do This Pset?}\label{header-n36}}

Maximization Problem:

\[\bar{\beta}^{\star}=\max _{\theta \in \Theta} \sum_{d \in\{0,1\}} \sum_{k=0}^{K_{d}} \gamma_{d k}^{\star} \theta_{d k} \quad \text { subject to } \sum_{d \in\{0,1\}} \sum_{k=0}^{K_{d}} \gamma_{s d k} \theta_{d k}=\beta_{s} \text { for all } s \in \mathcal{S} \\
\gamma_{d k}^{\star} \equiv E\left[\int_{0}^{1} b_{d k}(u, X) \omega_{d}^{\star}(u, X, Z) \mathrm{d} u\right] \\
\gamma_{s d k} \equiv E\left[\int_{0}^{1} b_{d k}(u, X) \omega_{d s}(u, X, Z) \mathrm{d} u\right]\]

Steps to Actually Implementing ATT

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  For each row of data, estimate propensity score using logit/probit
\item
  For each row of data, calculate weights for objective function:

  \[\omega_1^\star(u, z) = \frac{1[u \leq p(x, z)]}{P[D=1]} \\
  \omega_0^\star(u, z) = -\omega_{1}^{\star}(u, z)\]
\item
  Calculate 2 sets of \(\beta_s\) and for each row of data, calculate
  weights for our IV-like estimands (Table 3)

  \begin{enumerate}
  \def\labelenumii{\arabic{enumii}.}
  \item
    IV:

    \[\beta_s = \frac{\operatorname{Cov}(Y, Z)}{\operatorname{Cov}(D, Z)} \\
    s(d,z) = \frac{z-E[Z]}{\operatorname{Cov}(D, Z)}\]
  \item
    TSLS (jth component):

    \[\beta_s = e_{j}^{\prime}\left(\Pi E\left[\widetilde{Z} \tilde{X}^{\prime}\right]\right)^{-1}(\Pi E[\widetilde{Z} Y]) \\
    s(d,z) = e_{j}^{\prime}\left(\Pi E\left[\widetilde{Z} \tilde{X}^{\prime}\right]\right)^{-1} \Pi \widetilde{Z} \\
    \widetilde{X} \equiv\left[1, D, X^{\prime}\right]^{\prime} \\
    \widetilde{Z} \equiv\left[1, Z, X^{\prime}\right]^{\prime} \\
    \Pi \equiv E\left[\widetilde{X} \widetilde{Z}^{\prime}\right] E\left[\widetilde{Z} \widetilde{Z}^{\prime}\right]^{-1}\]

    Should we be using just the TSLS that doesn't change with with j?

    Remember that

    \begin{array}{l}
    \omega_{0 s}(u, z) \equiv s(0, z) \mathbb{1}[u>p(z)] \\
    \omega_{1 s}(u, z) \equiv s(1, z) \mathbb{1}[u \leq p(z)]
    \end{array}
  \end{enumerate}
\item
  For each row of data, generate Bernstein polynomial basis:

  \[b_{k}^{K}(z) \equiv\left(\begin{array}{l}
  K \\
  k
  \end{array}\right) u^{k}(1-u)^{K-k}\]
\item
  Now I can compute \(\gamma_{sdk}\) and \(\gamma^\star_{dk}\)

  \begin{enumerate}
  \def\labelenumii{\arabic{enumii}.}
  \item
    so this should give me \(m = \#s \times \#d \times k\) values for
    \(\gamma_{sdk}\) (so \(\#s  = 2\) and \(\#d = 2\) in this case)
  \item
    and this should give me \(\ell = \#d \times k\) values for
    \(\gamma_{dk}\)
  \end{enumerate}

  Now I am optimizing one objective function subject to 2 constraints.
  The constraints are 2 equations and \(m\) unknown \(\theta_{dk}\)'s.
\item
  Once I take the max and min from step 5 using gurobi, then I can solve
  for the max and min \(\beta^\star\)
\end{enumerate}

\end{document}
